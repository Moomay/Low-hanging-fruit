<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="icon" href="public/image/mango.png" type="image/png" sizes="50x50">
    <title>Document</title>
</head>
<body>
    <div id=user></div>
    <body>
        <div class="container">
          <div class="title">
            <h3>Kuy</h3>
          </div>
    
          <div class="card">
            <div class="card-header">Anonymous</div>
            <div class="card-body">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  id="username"
                  placeholder="Change your username"
                />
                <div class="input-group-append">
                  <button class="btn btn-warning" type="button" id="usernameBtn">
                    Change
                  </button>
                </div>
              </div>
            </div>
    
            <div class="message-box">
              <ul class="list-group list-group-flush" id="message-list"></ul>
              <div class="info"></div>
            </div>
    
            <div class="card-footer">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  id="message"
                  placeholder="Send new message"
                />
                <div class="input-group-append">
                  <button class="btn btn-success" type="button" id="messageBtn">
                    Send
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>
        <script src="public/Js/text.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        let requestURL = '/user/me';
        let request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState == 4 && request.status == 200) {
                var myJSON = JSON.parse(request.responseText);
                myFunction(myJSON);
            }
        };
        request.open("GET", requestURL, true);
        request.send();
        function myFunction(myObj) {
            username = myObj.username;
            user.innerHTML = username;
        }
    </script>
</body>
</html>